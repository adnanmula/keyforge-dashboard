<div class="row">
    <div>
        <a class="btn btn-dark" data-bs-toggle="collapse" href="#filters" role="button" aria-expanded="false"><i class="bi bi-filter"></i></a>
    </div>
</div>

<div class="collapse" id="filters">
    <div class="shadow-lg p-3 mb-5 bg-white rounded">
        <div class="row">
            <div class="col-md-12">
                <div class="form-group col-12">
                    <label for="houses" class="form-label">Set</label>

                    <div class="row" style="padding-left: .8em;">
                        <div class="form-check col-6 col-sm-4 col-md-4 col-lg-2 col-xl-2" style="display: flex; align-items: center;">
                            <input class="form-check-input set_selector" type="checkbox" value="CotA" id="check_set_cota">
                            <label for="check_set_cota"><img width="33px" src="{{ asset('assets/keyforge/sets/CotA.svg') }}" alt="CotA"/>CotA</label>
                        </div>
                        <div class="form-check col-6 col-sm-4 col-md-4 col-lg-2 col-xl-2" style="display: flex; align-items: center;">
                            <input class="form-check-input set_selector" type="checkbox" value="AoA" id="check_set_aoa">
                            <label for="check_set_aoa"><img width="33px" src="{{ asset('assets/keyforge/sets/AoA.svg') }}" alt="AoA"/>AoA</label>
                        </div>
                        <div class="form-check col-6 col-sm-4 col-md-4 col-lg-2 col-xl-2" style="display: flex; align-items: center;">
                            <input class="form-check-input set_selector" type="checkbox" value="WC" id="check_set_wc">
                            <label for="check_set_wc"><img width="33px" src="{{ asset('assets/keyforge/sets/WC.svg') }}" alt="WC"/>WC</label>
                        </div>
                        <div class="form-check col-6 col-sm-4 col-md-4 col-lg-2 col-xl-2" style="display: flex; align-items: center;">
                            <input class="form-check-input set_selector" type="checkbox" value="MM" id="check_set_mm">
                            <label for="check_set_mm"><img width="33px" src="{{ asset('assets/keyforge/sets/MM.svg') }}" alt="MM"/>MM</label>
                        </div>
                        <div class="form-check col-6 col-sm-4 col-md-4 col-lg-2 col-xl-2" style="display: flex; align-items: center;">
                            <input class="form-check-input set_selector" type="checkbox" value="DT" id="check_set_dt">
                            <label for="check_set_dt"><img width="33px" src="{{ asset('assets/keyforge/sets/DT.svg') }}" alt="DT"/>DT</label>
                        </div>
                    </div>
                </div>
                <div class="divider py-1"></div>
                <div class="divider py-1"></div>
                <div class="form-group col-12">
                    <label for="houses" class="form-label">Casas</label><b></b>
                    <input class="form-check-input house_type_selector" type="radio" name="houses_filter_type" id="houses_filter_type_1" value="all" checked>
                    <label class="form-check-label" for="houses_filter_type_1">Todas</label>
                    <input class="form-check-input house_type_selector" type="radio" name="houses_filter_type" id="houses_filter_type_2" value="any">
                    <label class="form-check-label" for="houses_filter_type_2">Cualquiera</label>

                    <div class="row" style="padding-left: .8em;">
                        <div class="form-check col-6 col-sm-6 col-md-4 col-lg-2 col-xl-2" style="display: flex; align-items: center;">
                            <input class="form-check-input houses_selector" type="checkbox" value="BROBNAR" id="check_house_brobnar">
                            <label for="check_house_brobnar"><img width="35px" src="{{ asset('assets/keyforge/houses/BROBNAR.png') }}" alt="BROBNAR"/>Brobnar</label>
                        </div>
                        <div class="form-check col-6 col-sm-6 col-md-4 col-lg-2 col-xl-2" style="display: flex; align-items: center;">
                            <input class="form-check-input houses_selector" type="checkbox" value="DIS" id="check_house_dis">
                            <label for="check_house_dis"><img width="35px" src="{{ asset('assets/keyforge/houses/DIS.png') }}" alt="DIS"/>Dis</label>
                        </div>
                        <div class="form-check col-6 col-sm-6 col-md-4 col-lg-2 col-xl-2" style="display: flex; align-items: center;">
                            <input class="form-check-input houses_selector" type="checkbox" value="UNTAMED" id="check_house_untamed">
                            <label for="check_house_untamed"><img width="35px" src="{{ asset('assets/keyforge/houses/UNTAMED.png') }}" alt="UNTAMED"/>Ind√≥mita</label>

                        </div>
                        <div class="form-check col-6 col-sm-6 col-md-4 col-lg-2 col-xl-2" style="display: flex; align-items: center;">
                            <input class="form-check-input houses_selector" type="checkbox" value="MARS" id="check_house_mars">
                            <label for="check_house_mars"><img width="35px" src="{{ asset('assets/keyforge/houses/MARS.png') }}" alt="MARS"/>Mars</label>
                        </div>
                        <div class="form-check col-6 col-sm-6 col-md-4 col-lg-2 col-xl-2" style="display: flex; align-items: center;">
                            <input class="form-check-input houses_selector" type="checkbox" value="SHADOWS" id="check_house_shadows">
                            <label for="check_house_shadows"><img width="35px" src="{{ asset('assets/keyforge/houses/SHADOWS.png') }}" alt="SHADOWS"/>Shadows</label>
                        </div>
                        <div class="form-check col-6 col-sm-6 col-md-4 col-lg-2 col-xl-2" style="display: flex; align-items: center;">
                            <input class="form-check-input houses_selector" type="checkbox" value="SANCTUM" id="check_house_sanctum">
                            <label for="check_house_sanctum"><label for="check_house_sanctum"><img width="35px" src="{{ asset('assets/keyforge/houses/SANCTUM.png') }}" alt="SANCTUM"/></label>Sanctum</label>
                        </div>
                        <div class="form-check col-6 col-sm-6 col-md-4 col-lg-2 col-xl-2" style="display: flex; align-items: center;">
                            <input class="form-check-input houses_selector" type="checkbox" value="LOGOS" id="check_house_logos">
                            <label for="check_house_logos"><img width="35px" src="{{ asset('assets/keyforge/houses/LOGOS.png') }}" alt="LOGOS"/>Logos</label>
                        </div>
                        <div class="form-check col-6 col-sm-6 col-md-4 col-lg-2 col-xl-2" style="display: flex; align-items: center;">
                            <input class="form-check-input houses_selector" type="checkbox" value="SAURIAN" id="check_house_saurian">
                            <label for="check_house_saurian"><img width="35px" src="{{ asset('assets/keyforge/houses/SAURIAN.png') }}" alt="SAURIAN"/>Saurios</label>

                        </div>
                        <div class="form-check col-6 col-sm-6 col-md-4 col-lg-2 col-xl-2" style="display: flex; align-items: center;">
                            <input class="form-check-input houses_selector" type="checkbox" value="STAR_ALLIANCE" id="check_house_star_alliance">
                            <label for="check_house_star_alliance"  class="text-nowrap"><img width="35px" src="{{ asset('assets/keyforge/houses/STAR_ALLIANCE.png') }}" alt="STAR_ALLIANCE"/>Alianza estelar</label>
                        </div>
                        <div class="form-check col-6 col-sm-6 col-md-4 col-lg-2 col-xl-2" style="display: flex; align-items: center;">
                            <input class="form-check-input houses_selector" type="checkbox" value="UNFATHOMABLE" id="check_house_unfathomable">
                            <label for="check_house_unfathomable"><img width="35px" src="{{ asset('assets/keyforge/houses/UNFATHOMABLE.png') }}" alt="UNFATHOMABLE"/>Insondable</label>
                        </div>
                    </div>
                </div>

                <div class="divider py-1"></div>
                <div class="divider py-1"></div>
                <div class="divider py-1"></div>

                <div class="row">
                    <div class="col-md-2 col-sm-4">
                        <label>Min SAS</label>
                        <input type="number" class="form-control" name="min-sas" id="filter_min_sas" min="30" max="108" value="30">
                        <label>Max SAS</label>
                        <input type="number" class="form-control" name="max-sas" id="filter_max_sas" min="30" max="108" value="108">
                    </div>

                    <div class="col-md-10 col-sm-8">
                        <label for="tags" class="form-label">Otras opciones</label>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="" id="with_external">
                            <label class="form-check-label" for="with_external">External decks/games</label>
                        </div>
                    </div>
                </div>

                <div class="divider py-1"></div>
                <div class="divider py-1"></div>
                <div class="divider py-1"></div>

                <div class="form-group">
                    <label for="tags" class="form-label">Etiquetas</label>
                    <input class="form-check-input tag_type_selector" type="radio" name="tags_filter_type" id="tags_filter_type_1" value="all" checked>
                    <label class="form-check-label" for="tags_filter_type_1">Todas</label>
                    <input class="form-check-input tag_type_selector" type="radio" name="tags_filter_type" id="tags_filter_type_2" value="any">
                    <label class="form-check-label" for="tags_filter_type_2">Cualquiera</label>

                    <div class="row" style="display: flex; overflow-x: auto">
                        {% for tag in tags %}
                            <div class="form-check-inline col-5 col-md-4 col-lg-3 col-xl-2 text-nowrap" id="tagsContainer" style="font-size: .6em;">
                                <button type="button" class="btn btn-xs btn-outline-dark tagButton" data-value="{{ tag.name }}" data-id="{{ tag.id }}" style="background-color: {{ tag.style.color_bg }}; color: {{ tag.style.color_text }}; border-color: {{ tag.style.color_outline }}">
                                    <input class="form-check-input tag_selector" type="checkbox" value="{{ tag.id }}" id="check_tag_{{ tag.id }}">
                                    {{ tag.name }}
                                </button>
                            </div>
                        {% endfor %}
                    </div>
                </div>

                <div class="divider py-1"></div>

                <div class="row mt-3">
                    <div class="col-4 col-md-2">
                        <button class="btn btn-block btn-dark w-100" id="clearFilters">Clear</button>
                    </div>
                    <div class="col-8 col-md-10">
                        <button class="btn btn-block btn-dark w-100" id="applyFilters">Apply</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $('.tagButton').click(function (e) {
        const input = $('#check_tag_' + e.target.getAttribute('data-id'))[0];

        if (input == undefined) {
            return;
        }

        if (input.indeterminate) {
            input.indeterminate = false;
            input.checked = false;

            return;
        }

        if (input.checked) {
            input.indeterminate = true;
            input.checked = false;
        } else {
            input.indeterminate = false;
            input.checked = true;
        }
    });
</script>
