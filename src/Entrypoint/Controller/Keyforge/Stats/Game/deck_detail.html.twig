{% block header %}
    <style>
        .img_stat {
            width: 50px;
            height: 50px;
        }

        .tooltip.show {
            opacity: 1;
        }

        .card_name {
            display: inline-block;
            text-overflow: ellipsis;
            overflow:hidden;
            white-space:nowrap;
            margin-left: 5px;
            vertical-align: middle;
            font-size: 1.2em;
            min-width: 0;
        }

        @media (min-width: 501px) {
            .card_name {
                max-width: 300px;
            }
        }

        @media (max-width: 500px) {
            .card_name {
                max-width: 150px;
            }
        }

        @media (max-width: 450px) {
            .card_name {
                max-width: 100px;
            }
        }

        @media (max-width: 400px) {
            .card_name {
                max-width: 80px;
            }
        }

        @media (max-width: 280px) {
            .card_name {
                max-width: 60px;
            }
        }

        @media (max-width: 255px) {
            .card_name {
                max-width: 40px;
            }
        }
    </style>
{% endblock %}
<div class="shadow-lg p-3 mb-5 bg-white rounded">
    <div class="row">
        <div class="col-12 col-md-11">
            <h2>{{ deck.name }}</h2>
        </div>
        <div class="d-flex col-12 col-md-1 justify-content-end">
            <h2 style="margin-top: 5px">{{ deck.sas }}</h2>
            <img style="margin-bottom: 15px" width="40px" src="/assets/keyforge/sets/{{ deck.set }}.svg" alt="{{ deck.set }}"/>
        </div>
    </div>

    <div class="row">
        <div class="col-12">
            <div class="row">
                <div class="col-12 col-lg-4" style="margin-top: 10px">
                    <img width="33px" src="/assets/keyforge/houses/{{ deck.houses.0 }}.png" alt="{{ deck.houses.0 }}"/><span style="font-size: 1.5em; vertical-align: middle; margin-left: 4px">{{ deck.houses.0 }}</span>
                    <div class="row">
                        {% for card in deck.data.cards.firstPodCards %}
                            <div class="col-6 col-lg-12">
                                <img width="18px" src="/assets/keyforge/rarities/{{ card.rarity }}.png" alt="{{ card.rarity }}" class="img-fluid"/>
                                <span class="card_name" data-bs-toggle="modal" data-bs-target="#card_image" data-card="{{ card.name }}" data-card-serialized="{{ card.serializedName }}">{{ card.name }}</span>
                            </div>
                        {% endfor %}
                    </div>
                </div>

                <div class="col-12 col-lg-4" style="margin-top: 10px">
                    <img width="33px" src="/assets/keyforge/houses/{{ deck.houses.1 }}.png" alt="{{ deck.houses.1 }}"/><span style="font-size: 1.5em; vertical-align: middle; margin-left: 4px">{{ deck.houses.1 }}</span>
                    <div class="row">
                        {% for card in deck.data.cards.secondPodCards %}
                            <div class="col-6 col-lg-12" style="display: block">
                                <img width="18px" src="/assets/keyforge/rarities/{{ card.rarity }}.png" alt="{{ card.rarity }}" class="img-fluid"/>
                                <span class="card_name" data-bs-toggle="modal" data-bs-target="#card_image" data-card="{{ card.name }}" data-card-serialized="{{ card.serializedName }}">{{ card.name }}</span>
                            </div>
                        {% endfor %}
                    </div>
                </div>

                <div class="col-12 col-lg-4" style="margin-top: 10px">
                    <img width="33px" src="/assets/keyforge/houses/{{ deck.houses.2 }}.png" alt="{{ deck.houses.2 }}"/><span style="font-size: 1.5em; vertical-align: middle; margin-left: 4px">{{ deck.houses.2 }}</span>
                    <div class="row">
                        {% for card in deck.data.cards.thirdPodCards %}
                            <div class="col-6 col-lg-12">
                                <img width="18px" src="/assets/keyforge/rarities/{{ card.rarity }}.png" alt="{{ card.rarity }}" class="img-fluid"/>
                                <span class="card_name" data-bs-toggle="modal" data-bs-target="#card_image" data-card="{{ card.name }}" data-card-serialized="{{ card.serializedName }}">{{ card.name }}</span>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>

        <div class="divider py-2"></div>

        <div class="row">
            <h2>Stats</h2>

            <div class="col-3">
                <div data-toggle="tooltip" title="Control de ambar">
                    <div class="row">
                        <div class="col-12" style="font-size: 1.6em">
                            {{ deck.data.amberControl }}
                            <img src="{{ asset('assets/keyforge/logos/amber_control.svg') }}" alt="Amber control" class="img_stat"/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-3">
                <div data-toggle="tooltip" title="Control de artefactos">
                    <div class="row">
                        <div class="col-12" style="font-size: 1.6em">
                            {{ deck.data.artifactControl }}
                            <img src="{{ asset('assets/keyforge/logos/artifact_control.svg') }}" alt="Artifact control" class="img_stat"/>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-3">
                <div data-toggle="tooltip" title="Ambar esperado">
                    <div class="row">
                        <div class="col-12" style="font-size: 1.6em">
                            {{ deck.data.expectedAmber }}
                            <img src="{{ asset('assets/keyforge/logos/expected_amber.svg') }}" alt="Expected amber" class="img_stat"/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-3">
                <div data-toggle="tooltip" title="Control de criaturas">
                    <div class="row">
                        <div class="col-12" style="font-size: 1.6em">
                            {{ deck.data.creatureControl }}
                            <img src="{{ asset('assets/keyforge/logos/creature_control.svg') }}" alt="Creature control" class="img_stat"/>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-3">
                <div data-toggle="tooltip" title="Eficiencia">
                    <div class="row">
                        <div class="col-12" style="font-size: 1.6em">
                            {{ deck.data.efficiency }}
                            <img src="{{ asset('assets/keyforge/logos/efficiency.svg') }}" alt="Efficiency" class="img_stat"/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-3">
                <div data-toggle="tooltip" title="Poder efectivo">
                    <div class="row">
                        <div class="col-12" style="font-size: 1.6em">
                            {{ deck.data.effectivePower }}
                            <img src="{{ asset('assets/keyforge/logos/power.svg') }}" alt="Effective power" class="img_stat"/>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-3">
                <div data-toggle="tooltip" title="Recursión">
                    <div class="row">
                        <div class="col-12" style="font-size: 1.6em">
                            {{ deck.data.recursion }}
                            <img src="{{ asset('assets/keyforge/logos/recursion.svg') }}" alt="Recursion" class="img_stat"/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-3">
                <div data-toggle="tooltip" title="Protección de criaturas">
                    <div class="row">
                        <div class="col-12" style="font-size: 1.6em">
                            {{ deck.data.creatureProtection }}
                            <img src="{{ asset('assets/keyforge/logos/creature_protection.svg') }}" alt="Creature protection" class="img_stat"/>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-3">
                <div data-toggle="tooltip" title="Disrupción">
                    <div class="row">
                        <div class="col-12" style="font-size: 1.6em">
                            {{ deck.data.disruption }}
                            <img src="{{ asset('assets/keyforge/logos/disruption.svg') }}" alt="Disruption" class="img_stat"/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-3">
                <div data-toggle="tooltip" title="Otros">
                    <div class="row">
                        <div class="col-12" style="font-size: 1.6em">
                            {{ deck.data.other }}
                            <img src="{{ asset('assets/keyforge/logos/other.svg') }}" alt="Other" class="img_stat"/>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="card_image" tabindex="-1" role="dialog" aria-labelledby="card_image" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalCardImage"></h5>
                    <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body text-center">
                    <img id="card_image_render" src="">
                </div>
            </div>
        </div>
    </div>

    <div class="d-flex flex-row-reverse">
        <a href="https://archonarcana.com/Deck:{{ reference }}" target="_blank"><img class="img-thumbnail" width="50px" style="min-width: 40px" src="{{ asset('assets/keyforge/logos/wiki.jpg') }}" alt="Wiki"/></a>
        <a href="https://decksofkeyforge.com/decks/{{ reference }}" target="_blank"><img class="img-thumbnail" width="40px" style="min-width: 40px" src="{{ asset('assets/keyforge/logos/dok.svg') }}" alt="DoK"/></a>
        <a href="https://keyforgegame.com/deck-details/{{ reference }}" target="_blank"><img class="img-thumbnail" width="50px" style="min-width: 50px" src="{{ asset('assets/keyforge/logos/vault.png') }}" alt="Vault"/></a>
    </div>

    <script>
        $('#card_image').on('show.bs.modal', function (event) {
            const button = $(event.relatedTarget)[0] // Button that triggered the modal

            const card = button.getAttribute('data-card');
            const cardSerialized = button.getAttribute('data-card-serialized');

            $('#modalCardImage')[0].innerText = card;
            $('#card_image_render')[0].src = 'https://keyforge-card-images.s3-us-west-2.amazonaws.com/card-imgs/' + cardSerialized + '.png';
        });
    </script>
</div>